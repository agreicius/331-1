<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="s_products_direct_semi" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Products: direct and semidirect</title>
    <subsection xml:id="ss_direct_products">
    <title>Direct products</title>
    <p>
        We begin with a characterization of groups that are isomorphic to a direct product. 
    </p>
    <theorem xml:id="th_direct_prod">
    <title>Characterization of direct products</title>
    <statement>
    <p>
    A group <m>G</m> is isomorphic to a direct product <m>\prod_{i=1}^r G_i</m> if and only if the conditions below are satisfied. 
    <ol marker="(i)">
        <li>
            <p>
                For all <m>1\leq i\leq r</m> there is a normal subgroup <m>N_i\normalin G</m> and an isomorphism <m>\phi_i\colon G_i\rightarrow N_i</m>. 
            </p>
        </li>
        <li>
            <p>
             The normal subgroups <m>N_i</m> satisfy 
             <mdn>
                <mrow xml:id="eq_direct_prod_prod">\prod_{i=1}^rN_i \amp = G</mrow>
                <mrow xml:id="eq_direct_prod_intersection">N_i\cap \prod_{j\ne i}N_j\amp =\{e\}, \text{ for all } 1\leq i\leq r \amp </mrow> 
             </mdn>.
            </p>
        </li>
    </ol>
    </p>
    </statement>
    <proof>
    <p>
    The forward implication is relatively straightforward. Given <m>G=\prod_{i\in I}G_i</m>, where <m>I=\{1,2,\dots, r\}</m>, define 
    <me>
        N_i=\{(g_j)_{j\in I}\mid g_j=e_{G_j} \text{ for all } j\ne i\}
    </me>.
    It is easy to see that the collection <m>N_1,N_2,\dots, N_r</m> satisfy conditions (i) and (ii). 
    </p>
    <p>
        For the reverse implication, given normal subgroups <m>N_1,N_2,\dots, N_r</m> satisfying conditions (i) and (ii), define 
        <md>
            <mrow>\phi\colon \prod_{i=1}^rG_i \amp \rightarrow G</mrow>
            <mrow>(g_1,g_2,\dots, g_n) \amp \mapsto \phi_1(g_1)\phi_2(g_2)\cdots \phi(g_r)</mrow>
        </md>.
        We claim <m>\phi</m> is an isomorphism. Once we know <m>\phi</m> is a homomorphism, it is not dificult to show that it is an isomorphism. Indeed, surjectivity follows from <xref ref="eq_direct_prod_prod"/>; and injectivity follows from <xref ref="eq_direct_prod_intersection"/>, which implies <m>\ker\phi=\{e\}</m>. That <m>\phi</m> is a homomorphism follow from the fact that if elements from different subgroups <m>N_i</m> commute with one another. We leave the details to the reader. 
    </p>
    </proof>
    </theorem>
    <definition xml:id="d_internal_direct_product">
        <title>Interal direct product</title>
        <statement>
            <p>
                Given a group <m>G</m> and normal subgroups <m>N_1, N_2, \dots, N_r</m> satisfying (i) and (ii) of <xref ref="th_direct_prod"/>, we say that <m>G</m> is the <term>internal direct product</term> of the subgroups <m>N_1, N_2, \dots, N_r</m>.
            </p>
        </statement>
    </definition>
    <corollary xml:id="cor_prod_Sylow">
        <title>Internal direct products of Sylow subgroups</title>
        <statement>
            <p>
                Let <m>G</m> be a finite group of cardinality <m>n&gt; 1</m>, and let <m>p_1,p_2,\dots, p_r</m> be the distinct prime divisors of <m>G</m>. The following conditions are equivalent. 
                <ol>
                    <li>
                        <p>
                            <m>G</m> is an internal direct product of its Sylow subgroups.
                        </p>
                    </li>
                    <li>
                        <p>
                            <m>n_{p_i}(G)=1</m> for all <m>1\leq i\leq r</m>. 
                        </p>
                    </li>
                </ol>
            </p>
        </statement>
    </corollary>
    <corollary xml:id="cor_sylow_abelian">
        <title>Sylow theorems for abelian groups</title>
        <statement>
            <p>
                Let <m>G</m> be a finite abelian group of cardinality <m>n&gt; 1</m>, and let <m>p_1,p_2,\dots, p_r</m> be the prime divisors of <m>n</m>. 
                <ol>
                    <li>
                        <p>
                        For each <m>1\leq i\leq r</m> there is a unique <m>p_i</m>-Sylow subgroup of <m>G</m>, <m>N_i</m>, and 
                        <me>
                            N_i=\{g\in G\mid \ord g=p_i^{n_i} \text{ for some } n_i\}
                        </me>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <m>G</m> is the internal direct product of the <m>N_i</m>. In particular, we have 
                            <me>
                                G\cong N_1\times N_2\times \cdots \times N_r
                            </me>.
                        </p>
                    </li>
                </ol>
            </p>
        </statement>
    </corollary>
    <definition xml:id="d_torsion_subgroups">
    <title>Torsion subgroups</title>
    <statement>
    <p>
    Let <m>G</m> be an abelian group. For all prime numbers <m>p</m>, the <term><m>p</m>-torsion subgroup</term> of <m>G</m>, denoted <m>G(p)</m> is defined as the set of all elements of <m>G</m> whose order is a power of <m>p</m>: <ie/>, 
    <me>
        G(p)=\{g\in G\mid \ord g=p^n \text{ for some } n\in \Z\}
    </me>.
    The <term>torsion subgroup</term> of <m>G</m> is the set of all elements of <m>G</m> of finite order. 
    </p>
    </statement>
    </definition>
    
    <theorem xml:id="th_structure_finite_abelian">
    <title>Structure of finite abelian groups: elementary divisors</title>
    <statement>
    <p>
    Let <m>G</m> be a finite abelian group of cardinality <m>n&gt; 1</m>, let <m>p_1,p_2,\dots, p_r</m> be the distinct prime divisors of <m>n</m>. Assume <m>n</m> factors as 
    <me>
        n=\prod_{i=1}^rp_i^{n_i}
    </me>.
    <ol>
        <li>
            <p>
                <m>G\cong \prod_{i=1}^r P_i</m>, where <m>P_i</m> is an abelian group of cardinality <m>p_i^{n_i}</m>.
            </p>
        </li>
        <li>
            <p>
                For all <m>1\leq i\leq r</m> there are is a unique sequence of integers <m>(m_{i,1},m_{i,2},\dots, m_{i,r_i})</m> satisfying 
                <md>
                    <mrow>  0&lt; m_{i,1} \leq m_{i,2}\amp\leq \cdots \leq m_{i,r_i}\amp </mrow>
                    <mrow>m_{i,1}+m_{i,2}\amp+\cdots m_{i,r_i}  =n_i</mrow>
                    <mrow>P_i\amp\cong \prod_{j=1}^{r_i}\Z/p_i^{m_{i,j}}\Z \amp </mrow>
                </md>.

            </p>
        </li>
    </ol>
    </p>
    </statement>
    <proof>
    <p>
        In Math 331-2 we will prove a more general result, called the <em>structure theorem for finitely generated modules over PIDs</em> that implies this theorem. 
    </p>
    </proof>
    </theorem>
    
    </subsection>
    <subsection xml:id="ss_semidirect_products">
    <title>Semidirect products</title>
    <p>
        Although the definition of an (external) semidirect product might seem overly complicated, it is inspired by a scenario that comes up frequently when investigating groups. Namely, we often are able to locate subgroups <m>N, H\leq G</m> with <m>N</m> normal, such that <m>N\cap H=\{e\}</m> and <m>G=NH</m>. If <m>H</m> is itself normal, then <xref ref="th_direct_prod"/> implies that <m>G\cong N\times H</m>, and we have come a big step forward in our understanding of <m>G</m>. But what if <m>H</m> is not normal? In this case there is still a bijection between <m>G</m> and the Cartesian product <m>N\times H</m>, but now the group operations of <m>G</m> and the direct product <m>N\times H</m> do not necessarily match up! This is because elements of <m>N</m> and <m>H</m> need not commute with one another, as they do in the direct product <m>N\times H</m>.
    </p>
    <p>
        We can be more precise about this. Since <m>N</m> is normal, every element <m>h\in H</m> defines an automorphism <m>\phi_h\colon N\rightarrow N</m> via conjugation: <ie/>, <m>\phi_h(n)=hnh^{-1}</m> for all <m>n\in N</m>. Given elements <m>g=nh</m> and <m>g'=n'h'</m> in <m>G</m> we have 
        <md>
            <mrow>gg' \amp =nhn'h'</mrow>
            <mrow> \amp =nn''hh' \amp n''=hn'h^{-1}</mrow>
            <mrow> \amp =n\phi_h(n')hh' </mrow>
        </md>.
        Thus, the group structure of <m>G</m> together with our bijection between <m>G</m> and <m>N\times H</m> gives rise to a sort of <q>twisted</q> product <m>\star</m> on the set <m>N\times H</m>, as diagrammed below. 
        <men xml:id="eq_semidirect_diagram">
           \begin{array}{ccc}
           N\times H \amp \longleftrightarrow \amp G \\
           \hline
           (n,h) \amp \longleftrightarrow\amp nh \\
             (n',h') \amp \longleftrightarrow\amp n'h' \\
              (n,h)\star (n',h')=(n\phi_h(n'),hh') \amp \longleftrightarrow\amp gg'=nhn'h'=n\phi_h(n')hh'
           \end{array}
        </men>
    This is the origin of the semidirect product construction given in <xref ref="spec_semidirect_product"/>. There is one more detail that appears there that shows up in our setting above as well: the map <m>h\mapsto \phi_h</m> associating <m>h</m> to its corresponding conjugation automorphism is not just a map of sets from <m>H</m> to <m>\Aut H</m>, it is in fact a group homomorphism, as we have shown before. 
    </p>
    <activity xml:id="spec_semidirect_product">
    <title>Semidirect product</title>
    <notation>
        <usage><m>G_1\rtimes G_2</m></usage>
      <description>semidirect product of <m>G_1</m> and <m>G_2</m></description>
    </notation>
    <statement>
    <p>
    Let <m>G_1</m> and <m>G_2</m> be groups, and let <m>\phi\colon G_2\rightarrow \Aut(G_1)</m> be a group homomorphism. The <term>semidirect product</term> of <m>G_1</m> and <m>G_2</m> is the group <m>G_1\rtimes_\phi G_2</m> whose underlying set is the Cartesian product <m>G_1\times G_2</m> and whose group operation is defined as 
    <men xml:id="eq_semidirect">
        (g_1,g_2)\cdot (g_1',g_2')=(g_1\phi_{g_2}(g_1'),g_2g_2')
    </men>,
    where <m>\phi_{g_2}</m> is the automorphism <m>\phi(g_2)\in \Aut(G_1)</m>. 
    </p>
    <p>
        The identity element of <m>G_1\rtimes G_2</m> is <m>(e_{G_1}, e_{G_2})</m>. Given <m>(g_1,g_2)\in G_1\rtimes G_2</m>, its inverse is 
        <men xml:id="eq_semidirect_inverse">
            (g_1,g_2)^{-1}=(\phi_{g_2^{-1}}(g_1^{-1}),g_2^{-1})
        </men>.
    </p>
    </statement>
    </activity>
    <p>
        In order to work explicit examples, we will need to get into the nuts and bolts of certain automorphism groups, as well as homomorphisms into those groups. Before we do so, we state and prove an analog to <xref ref="th_direct_prod"/> for semidirect products. Roughly, it tells us that descriptions of <m>G</m> of the form <m>G=NH</m> with <m>N</m> normal and <m>N\cap H=\{e\}</m> are equivalent to isomorphisms between <m>G</m> and a semidirect product. 
    </p>
    <theorem xml:id="th_internal_semidirect_prod">
    <title>Internal semidirect products</title>
    <statement>
    <p>
    A group <m>G</m> is isomorphic to a semidirect product <m>G_1\rtimes_\phi G_2</m> if and only if the following conditions are satisfied. 
    <ol marker="(i)">
        <li>
            <p>
                There is a normal subgroup <m>N\normalin G</m> and subgroup <m>H\leq G</m>, along with isomorphisms <m>\phi_1\colon G_1\rightarrow N</m> and <m>\phi_2\colon G_2\rightarrow H</m>.
            </p>
        </li>
        <li>
            <p>
                <m>N</m> and <m>H</m> satisfy 
                <mdn>
                    <mrow>G \amp = NH</mrow>
                    <mrow>N\cap H \amp = \{e\}</mrow>
                </mdn>.
    </p>
</li>
</ol>
</p>
    </statement>
    <proof>
    <p>
        The reverse implication pretty much follows our discussion above motivating the semidirect product definition. Namely, given conditions (i) and (ii), it is easy to show that the map 
        <md>
            <mrow>\alpha \colon G \amp \rightarrow N\rtimes_\psi H</mrow>
            <mrow>g=nh \amp \mapsto (n,h)</mrow>
        </md>
        is an isomorphism, where <m>\psi\colon H\rightarrow \Aut(N)</m> is the homomorphism that sends <m>h</m> to its corresponding conjugation automorphism <m>\psi_h</m>. That the map is well-defined and bijective follows from the fact that every element in <m>G</m> can be written in a unique way in the form <m>g=nh</m>, where <m>n\in N</m> and <m>h\in H</m>. That <m>\alpha</m> is a homomorphism follows from the same reasoning we gave above and diagrammed in <xref ref="eq_semidirect_diagram"/>.
    </p>
    <p>
        Lastly, the isomorphisms <m>\phi_1, \phi_2</m> give rise to an isomorphism 
        <md>
            <mrow>\beta\colon N\rtimes_\psi H \amp\rightarrow  G_1\rtimes_\phi G_2</mrow>
            <mrow>(n,h) \amp \longmapsto (\phi_1^{-1}(n), \phi_2^{-1}(h))</mrow>
        </md>,
        where <m>\phi\colon G_2\rightarrow \Aut(G_1)</m> is the homomorphism that sends an element <m>g_2\in G_2</m> to the automorphism <m>\phi_{g_2}\in \Aut(G_1)</m> defined as 
        <me>
            \phi_{g_2}(g_1)=\phi_{1}^{-1}(\phi_2(g_1)\phi_1(g_1)\phi_2(g_1)^{-1})
        </me>.
        This is illustrated in the diagram below, which articulates how the automorphism <m>\phi_{g_2}\in \Aut(G_1)</m> corresponds to conjugation by <m>h=\phi_2(g_2)</m> as an automorphism of <m>N</m>. 
    </p>
    <image width="80%" xml:id="im_semidirect_corr">
            <shortdescription>Diagram illustrating automorphisms of G2</shortdescription>
            <latex-image>
            \begin{tikzcd}
            g_1 \arrow[ddd,mapsto, bend right=20] \arrow[rrr,mapsto, bend left=20] \arrow[dr,phantom,sloped, "\in"]  \amp  \amp \amp \phi_1^{-1}(hnh^{-1}) \arrow[dl,phantom,sloped, "\ni"] \\ [-20]
            \amp   G_1 \arrow[r,"\phi_{g_2}"] \arrow[d,"\phi_1"'] \amp G_1 \amp  \\ [10]
            \amp N \arrow[r,"\psi_h"] \amp N \arrow[u,"\phi_1^{-1}"'] \amp \\[-20]
            n=\phi(g_1) \arrow[rrr,mapsto, bend right=20] \arrow[ur,phantom,sloped, "\in"] \amp \amp \amp hnh^{-1} \arrow[ul,phantom,sloped, "\ni"] \arrow[uuu,mapsto, bend right=20] 
            \end{tikzcd}
            </latex-image>
        </image>
    <p>
        It is clear that <m>\beta</m> is a bijection, since the <m>\phi_i</m> maps are bijections. We leave the fact that <m>\beta</m> is a homomorphism (<ie/>, respects the semidirect product operations of both groups) to the reader. Composing <m>\alpha</m> and <m>\beta</m> gives the desired isomorphism from <m>G</m> to <m>G_1\rtimes_\phi G_2</m>. 
    </p>
    <p>
        For the forward implication, first observe that if <m>G</m> is isomorphic to <m>G_1\rtimes_\phi G_2</m>, then it has subgroups satisfying conditions (i) and (ii) if and only if <m>G_1\rtimes_\phi G_2</m> has such subgroups. Thus, we assume without loss of generality that <m>G=G_1\rtimes_\phi G_2</m>, and endeavor to find subgroups <m>N, H</m> of <m>G_1\rtimes_\phi G_2</m> satisfying conditions (i) and (ii). We leave it to the reader to verify that 
        <md>
            <mrow>N \amp =G_1\times\{e_{G_{2}}\} =\{(g_1,e_{G_2})\mid g_1\in G\}</mrow>
            <mrow>H \amp = \{e_{G_1}\}\times G_2=\{(e_{G_1},g_2)\mid g_2\in G_2\} </mrow>
        </md>
        do the trick. 
    </p>
    </proof>
    </theorem>
    <example xml:id="eg_groups_card_21">
    <title>Groups of cardinality 21</title>
    <statement>
    <p>
    Prove that up to isomorphism there is exactly one abelian group of cardinality <m>21</m> and one nonabelian group of cardinality <m>21</m>. 
    </p>
    </statement>
    <solution>
    <p>
    It follows immediately from <xref ref="th_structure_finite_abelian"/> all abelian groups of cardinality <m>21</m> are isomorphic to <m>\Z/3\Z\times \Z/7\Z</m>.
    </p>
    <p>
        Assume now that <m>G</m> is a nonabelian group of cardinality <m>21</m>. From the Sylow theorems, <m>G</m> has a unique <m>7</m>-Sylow subgroup and that <m>N</m> is normal. Let <m>H</m> be a <m>3</m>-Sylow subgroup. The usual arguments shows that <m>N\cap H=\{e\}</m> and <m>G=NH</m>. Since furthermore <m>N=\angvec{g}</m> and <m>H=\angvec{h}</m> are both cyclic, we have <m>G=\{n^ih^k\mid 0\leq i\leq 6, 0\leq k\leq 2\}</m>. 
    </p>
    </solution>
    </example>
    
    
    <p>
        Since we will be dealing with automorphism groups, it will be useful to have a result identifying these groups in some familiar cases. We will prove the first two statements in <xref ref="th_automorphism_groups"/> in Math 331-2. The last two statements will not be used much in our examples, and are left as exercises. 
    </p>
    <definition xml:id="d_hom_set">
    <title>Homomorphism set</title>
    <statement>
    <p>
    Let <m>G</m> and <m>H</m> be groups. The set of all group homomorphisms from <m>G</m> to <m>H</m> is denoted <m>\Hom(G,H)</m>. 
    </p>
    </statement>
    </definition>
    
    <proposition xml:id="th_automorphism_groups">
    <title>Homomorphism sets and automorphisms</title>
    <statement>
    <p>
    <ol>
        <li>
            <title>Homomorphisms from infinite cyclic groups</title>
            <p>
                Let <m>G=\angvec{g}</m> be an infinite cyclic group and let <m>H</m> be any group. For any <m>h\in H</m> the map <m>\phi(g^k)=h^k</m> is a group homomorphism. As a result, the map 
                <md>
                    <mrow>\Hom(G,H) \amp \rightarrow H</mrow>
                    <mrow>\phi \amp \mapsto h=\phi(g)</mrow>
                </md> 
                is a bijection of sets. In particular, <m>\Hom(\Z, G)</m> is in bijective correspondence with elements of <m>G</m> via the map <m>\phi\mapsto \phi(1)\in G</m>. 
            </p>
        </li>
        <li>
            <title>Homomorphisms from finite cyclic groups</title>
            <p>
                Let <m>G=\angvec{g}</m> be a cyclic group of cardinality <m>n</m>. Given any group <m>H</m> and any <m>h\in H</m> satisfying <m>h^n=e</m>, the map <m>\phi(g^k)=h^k</m> is a group homomorphism. As a result, the map 
                <md>
                    <mrow>\Hom(G,H)\amp \rightarrow \{h\in H\mid h^n=e\}</mrow>
                    <mrow>\phi \amp \mapsto \phi(g)</mrow>
                </md>
                is a bijection of sets. In particular, <m>\Hom(\Z/n\Z,H)</m> is in bijective correspondence with elements <m>h</m> of <m>H</m> satisfying <m>h^n=e</m> via the map <m>\phi\mapsto \phi(1)</m>. 
            </p>
        </li>

        <li>
            <p>
                Given a cyclic group <m>G</m> of cardinality <m>n</m>, the map 
                <md>
                    <mrow>(\Z/n\Z)^* \amp \rightarrow \Aut(G)</mrow>
                    <mrow>i \amp \mapsto (g\mapsto g^{i})</mrow>
                </md>
                is an isomorphism. As a result, we have 
                <me>
                    \Aut(\Z/n\Z)\cong (\Z/n\Z)^*
                </me>.
                Additionally, if <m>p</m> is prime, then <m>(\Z/p\Z)^*</m> is a cyclic group of cardinality <m>p-1</m>. 
            </p>
        </li>
        <li>
            <p>
                <m>\Aut((\Z/n\Z)^k)\cong\GL_k(\Z/n\Z)</m> for any positive integer <m>k</m>.
            </p>
            <p>
                In particular, <m>\Aut(\Z/n\Z\times \Z/n\Z)\cong \GL_2(\Z/n\Z)</m>. 
            </p>
        </li>
        <li>
            <p>
                <m>\Aut(S_n)\cong S_n</m> for all <m>n\ne 6</m>. 
            </p>
        </li>
        <li>
            <p>
                <m>\Aut(D_n)\cong \Aff(\Z/n\Z)</m> for any <m>n\geq 3</m>. 
            </p>
        </li>
    </ol>
    </p>
    </statement>
    <proof>
    <p>
    </p>
    </proof>
    </proposition>
    <p>
        The next proposition makes clearer how the choice of <m>\phi\colon H\rightarrow \Aut(N)</m> affects the semidirect product <m>N\rtimes_\phi H</m>. 
    </p>
    <proposition xml:id="prop_semi_choice">
        <title>Isomorphic semidirect products</title>
        <statement>
            <p>
                Let <m>N</m> and <m>H</m> be groups, and let <m>\phi\colon H\rightarrow \Aut(N)</m>. 
                <ol>
                    <li>
                        <p>
                            If <m>\psi\in \Aut(H)</m>, then 
                            <me>
                                N\rtimes_{\phi} H\cong N\rtimes_{\phi'}H
                            </me>,
                            where <m>\phi'=\phi\circ \psi</m>. 
                        </p>
                    </li>
                    <li>
                        <p>
                            If <m>\psi\in \Aut(\Aut(N))</m>, then 
                            <me>
                                N\rtimes_\phi H\cong N\rtimes_{\phi'}H
                            </me>
                            where <m>\phi'=\psi\circ \phi</m>.
                        </p>
                    </li>
                </ol>
            </p>
        </statement>
    </proposition>
    </subsection>

</section>