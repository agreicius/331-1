<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="s_localization" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Localizations and fraction fields</title>

    <definition xml:id="d_localization">
    <title>Localization</title>
    <notation>
        <usage><m>S^{-1}R</m></usage>
      <description>localization of ring <m>R</m> by <m>S</m></description>
    </notation>
    <statement>
    <p>
    Let <m>R</m> be a nonzero commutative ring. A subset <m>S\subseteq R</m> is <term>multiplicative</term> if the following conditions hold.
    <ol marker="(i)">
        <li>
            <p>
                <m>1\in S</m>.
            </p>
        </li>
        <li>
            <p>
                If <m>s,t\in S</m>, then <m>st\in S</m>. 
            </p>
        </li>
    </ol>
    Given a multiplicative subset <m>S\subseteq R</m> we define an equivalence relation <m>\sim</m> on the set <m>R\times S</m> as follows: 
    <ul>
        <li>
            <p>
                we formally write <m>(r,s)=r/s</m> for all <m>(r,s)\in R\times S</m>; 
            </p>
        </li>
        <li>
            <p>
                define <m>r/s\sim r'/s'</m> if there exists <m>t\in S</m> satisfying 
                <md number="yes">
                    <mrow xml:id="eq_locali_equiv">t(s'r-sr') \amp = 0</mrow>
                </md>,
                or equivalently, 
                <md number="yes">
                    <mrow>ts'r=tsr' \amp </mrow>
                </md>.
            </p>
        </li>
    </ul>
    The <term>localization of <m>R</m> by <m>S</m></term> (or <term>ring of fractions of <m>R</m> by <m>S</m></term>), denoted <m>S^{-1}R</m> is the set of all equivalence classes of <m>R\times S</m> with respect to <m>\sim</m>: <ie/>, 
    <md>
        <mrow>S^{-1}R \amp =\{[r/s]_{\sim}\mid (r,s)\in R\times S\}</mrow>
    </md>.
    By abuse of notation, we will write <m>r/s</m> instead of <m>[r/s]_{\sim}</m>, and <m>r/s=r'/s'</m> instead of <m>r/s\sim r'/s'</m>.
    </p>
    </statement>
    </definition>
    <remark>
    <title><m>\Q</m> as localization of <m>\Z</m></title>
    <p>
    The definition of a localization <m>S^{-1}R</m> should remind you immediately of the construction of <m>\Q</m> from <m>\Z</m>. Indeed, with our new notation, we have <m>\Q=S^{-1}\Z</m>, where 
    <md>
        <mrow>S \amp =\Z-\{0\}</mrow>
    </md>.
    </p>
    </remark>
    <remark>
    <title>Localization equivalence relation</title>
    <p>
    The extra <m>t</m> appearing in the equivalence relation definition <xref ref="eq_locali_equiv"/> tends to bum people out. It is not used in the usual construction of <m>\Q</m>, so why is it included here? It turns out, you need this even to show that <m>\sim</m> is an equivalence relation! The issue becomes apparent when you try to verify the transitivity property. Note, however, that if all elements of <m>S</m> are nonzero and are not zero divisors, then the <m>t</m> can be cancelled in <xref ref="eq_locali_equiv"/>, and we recover the more familiar definition of <q>equality</q>.  
    </p>
    </remark>
    <activity xml:id="spec_localization">
    <title>Localization by <m>S</m></title>
    <statement>
    <p>
    Let <m>S</m> be a multiplicative subset of the nonzero commutative ring <m>R</m>. The rules 
    <md number="yes">
        <mrow>r/s+r'/s' \amp = (s'r+r's)/ss'</mrow>
        <mrow>r/s\cdot r'/s' \amp = rr'/ss'</mrow>
    </md>
    yield well-defined binary operations <m>+</m> and <m>\cdot</m> on <m>S^{-1}R</m>, turning it into a commutative ring. The additive and multiplicative identities with respect to this ring structure are <m>0=0/1</m> and <m>1=1/1</m>. 
    </p>
    <p>
        Additionally we call the map <m>\lambda\colon R\rightarrow S^{-1}R</m> defined as <m>\lambda(r)=r/1</m> the <term>localization map</term> with respect to <m>S</m>. 
    </p>
    </statement>
    </activity>
    <proposition xml:id="prop_locali">
        <title>Localization map</title>
        <statement>
            <p>
                Let <m>S</m> be a multiplicative subset of the nonzero commutative ring <m>R</m>. Define 
                <md number="yes">
                    <mrow>\phi\colon R \amp \rightarrow S^{-1}R</mrow>
                    <mrow>r \amp \mapsto r/1</mrow>
                </md>.
                <ol>
                    <li>
                        <p>
                            <m>\phi</m> is a ring homomorphism.
                        </p>
                    </li>
                    <li>
                        <p>
                            <m>\ker\phi=\{r\in R\mid sr=0 \text{ for some } s\in S\}</m>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <m>\phi(S)\subseteq (S^{-1}R)^*</m>. In other words, <m>\phi(s)</m> is a unit of <m>S^{-1}R</m> for all <m>s\in S</m>. 
                        </p>
                    </li>
                </ol>
            </p>
        </statement>
    </proposition>
    <remark xml:id="rem_locali">
        <title>Localization</title>
        <p>
            Predictably, given a ring <m>R</m> and multiplicative subset <m>S\subseteq R</m>, we will often want to identify <m>S^{-1}R</m> as a familiar ring or quotient thereof (or product thereof). <xref ref="th_locali_mapping"/> below will provide our main technical tool for establishing isomorphisms. However, we also want to develop some intuition about what <m>S^{-1}R</m> might be in different cases. The proposition above, combined with the concrete construction of <m>S^{-1}R</m> partially spells out this intuition: the ring <m>S^{-1}R</m> should be thought of as the result of adjoining inverses <m>1/s</m> to all elements of <m>S</m>. Equivalently, <m>S^{-1}R</m> is the result of inverting all elements of <m>S</m>. To refine this intuition somewhat, the mapping property articulated in <xref ref="th_locali_mapping"/> below can be interpreted as saying that <m>S^{-1}R</m> is the <q>smallest</q> ring <q>containing</q> <m>R</m> in which all elements of <m>S</m> are units. 
        </p>
        <p>
            That interpretation seems straightforward enough, but there are often unforeseen consequences to inverting elements of <m>S</m>. For example, if <m>S</m> contains a zero divisor, then according to <xref ref="prop_locali"/>, if <m>r\in R</m> satisfies <m>sr=0</m>, then <m>r/1=0</m> in the localization <m>S^{-1}R</m>.  This reveals a cruel reality of the localization process, at least as it pertains to zero divisors: for every <m>s\in S</m> that is granted an inverse <m>1/s</m> in <m>S^{-1}R</m>, there is potentially a zero divisor <m>r</m> that is killed in the process! 
        </p>
    </remark>

    <theorem xml:id="th_frac_field">
    <title>Fraction field</title>
    <statement>
    <p>
    Let <m>R</m> be an integral domain. 
    <ol>
        <li>
            <p>
                The set <m>S=R-\{0\}</m> is a multiplicative subset of <m>R</m>. 
            </p>
        </li>
        <li>
            <p>
                <m>F=S^{-1}R</m> is a field. 
            </p>
        </li>
        <li>
            <p>
                The localization map <m>\lambda\colon R\rightarrow F</m> is injective. 
            </p>
        </li>
    </ol>
    </p>
    </statement>
    <proof>
    <p>
        <ol>
            <li>
                <p>
                    Let <m>S=R-\{0\}</m>, the set of all nonzero elements of <m>R</m>.  Clearly <m>1\in S</m>. And <m>S</m> is closed under multiplication because <m>R</m> is an integral domain. 
                </p>
            </li>
            <li>
                <p>
                    First observe that <m>r/s= 0=0/0</m> in <m>S^{-1}R</m> if and only if there is a <m>t\in S</m> such that <m>tr=0</m>. Since <m>R</m> is integral and <m>S=R-\{0\}</m>, we see that this is true if and only if <m>r=0</m>. Thus, given nonzero <m>r/s</m>, we may assume <m>r\ne 0</m>, in which case <m>r\in S=R-\{0\}</m>. But then the element <m>s/r</m> is easily seen to be an inverse of <m>r/s</m>. 
                </p>
            </li>
        </ol>
    </p>
    </proof>
    </theorem>
    <definition xml:id="d_frac_field">
    <title>Fraction field</title>
    <notation>
        <usage><m>\Frac R</m></usage>
      <description>the fraction field of <m>R</m></description>
    </notation>
    <statement>
    <p>
    Let <m>R</m> be an integral domain, and let <m>S=R-\{0\}</m>. The field <m>S^{-1}R</m> is called the <term>fraction field</term> of <m>R</m>, denoted <m>\Frac R</m>. 
    </p>
    </statement>
    </definition>
    
    <example xml:id="eg_frac_fields">
    <title>Fraction fields</title>
    <statement>
    <p>
    Give a description of the fraction fields of the following integral domains. Do you recognize these as objects you saw before in your mathematical youth?
    <ol>
        <li>
            <p>
                <m>\Z</m>.
            </p>
        </li>
        <li>
            <p>
                <m>F[x]</m>, where <m>F</m> is a field. 
            </p>
        </li>
    </ol>
    </p>
    </statement>
    <solution>
    <p>
    These two fraction fields are precisely the rational numbers <m>\Q</m>, and the so-called field of rational functions over <m>F</m>, respectively. 
    </p>
    </solution>
    </example>
    <activity xml:id="spec_rational_functions">
    <title>Rational functions over field</title>
    <statement>
    <p>
    Given a field <m>F</m>, the <term>field of rational functions</term> over <m>F</m> in the indeterminate <m>x</m>, denoted <m>F((x))</m> is defined as the fraction field of <m>F[x]</m>: <ie/>, 
    <md number="yes">
        <mrow xml:id="eq_frac_field"> F((x))\amp = \Frac F[x] </mrow>
    </md>.
    </p>
    </statement>
    </activity>
    
    
    <p>
         When the fraction field of an integral domain is not something familiar to us (based solely on the construction as a localization ring), we will want to identify it as a familiar field. To do so, the following mapping property of localizations is essential. 
    </p>
    <theorem xml:id="th_locali_mapping">
    <title>Mapping property of localizations</title>
    <statement>
    <p>
    Let <m>S</m> be a multiplicative subset of the nonzero commutative ring <m>R</m>, and let <m>\lambda\colon R\rightarrow S^{-1}R</m> be the localization map.  Given any ring homomorphism <m>\phi\colon R\rightarrow T</m> satisfying <m>\phi(S)\subseteq T^*</m>, there exists a unique ring homomorphism <m>\phi^*\colon S^{-1}R\rightarrow T</m> satisfying 
    <md>
        <mrow>\phi \amp =\phi^*\circ \lambda</mrow>
    </md>.
    Moreover, <m>\phi^*</m> is defined as 
    <md number="yes">
        <mrow xml:id="eq_locali_map">\phi^*(r/s) \amp = \phi(r)\phi(s)^{-1}</mrow>
    </md>.
    In short, there is a unique homomorphism <m>\phi^*</m> making the diagram below commutative. 
    </p>
    <image width="40%">
        <shortdescription>Commutative diagram summarizing mapping property of the localization map</shortdescription>
        <latex-image>
        \begin{tikzcd}
        R\arrow[rr,"\phi"] \arrow[rd,"\lambda"'] \amp  \amp T \\
        \amp S^{-1}R \arrow[ru,"\exists\, ! \,\phi^*"', dotted] \amp  \amp 
        \end{tikzcd}
        </latex-image>
    </image>
    </statement>
    <proof>
    <p>
        Given such a map <m>\phi</m>, if <m>\phi^*</m> exists making the diagram commutative, then in particular, we must have 
        <md>
            <mrow>\phi^*(r/1) \amp =\phi(r)</mrow>
        </md>
        for all <m>r\in R</m>. Since <m>\phi^*</m> is a ring homomorphism, we must have 
        <md>
            <mrow>\phi(r/s) \amp =\phi(r/1\cdot 1/s)</mrow>
            <mrow> \amp \phi^*(r/1\cdot (s/1)^{-1}) </mrow>
            <mrow> \amp =\phi^*(r/1)\cdot (\phi^*(s/1))^{-1}</mrow>
            <mrow> \amp = \phi(r)\phi(s)^{-1}</mrow>
        </md>,
        as claimed. 
    </p>
    <p>
        To finish the proof, we simply show that the proposed formula gives rise to a well-defined ring homomorphism <m>\phi^*\colon S^{-1}R\rightarrow T</m> satisfying <m>\phi=\phi^*\circ \lambda</m>. We first check that we get a well-defined function. Suppose <m>r/s=r'/s'</m>, so that there exists an element <m>s''\in S</m> satisfying <m>s''s'r=s''sr'</m>. We then have 
        <md>
            <mrow>\phi(s''s'r)=\phi(s''sr') \amp\implies \phi(s'')phi(s')\phi(r)=\phi(s'')\phi(s)\phi(r') </mrow>
            <mrow> \amp \implies \phi(r)\phi(s)^{-1}=\phi(r')\phi(s')^{-1} \amp (x\in S\implies \phi(x)\in T^*) </mrow>
            <mrow> \amp \implies \phi^*(r/s)=\phi^*(r'/s')</mrow>
        </md>.
        As is often the case in these situations, having establish well-definedness of <m>\phi^*</m>, the remaining desired properties are easily verified. Here is a quick verification of all the properties we need:
        <md>
            <mrow>\phi^*(\lambda(r)) \amp =\phi^*(r/1)</mrow>
          <mrow>  \amp =\phi(r)\phi(1)^{-1}=\phi(r) </mrow>
          <mrow>\phi^*(r/s+r'/s') \amp =\phi^*((s'r+r's)/ss')</mrow>
          <mrow> \amp \phi(s'r+r's)\phi(ss')^{-1} </mrow>
          <mrow> \amp =(\phi(s')\phi(r)+\phi(r')\phi(s))\phi(s)^{-1}\phi(s')^{-1}</mrow>
          <mrow> \amp =\phi(r)\phi(s)^{-1}+\phi(r')\phi(s')^{-1} </mrow>
          <mrow> \amp =\phi(r/s)+\phi(r'/s')</mrow>
          <mrow>\phi^*(r/s\cdot r'/s') \amp =\phi^*(rr'/ss')</mrow>
          <mrow> \amp = \phi(rr')\phi(ss')^{-1}</mrow>
          <mrow> \amp =\phi(r)\phi(s)^{-1}\phi(r')\phi(s')</mrow>
          <mrow> \amp = \phi^*(r/s)\phi^*(r'/s')</mrow>
          <mrow>\phi^*(1) \amp =\phi^*(1/1)</mrow>
          <mrow> \amp =\phi(1)\phi(1)^{-1}=1</mrow>
        </md>.
    </p>
    </proof>
    </theorem>
    <p>
        The next corollary is a useful summary of <xref ref="th_locali_mapping"/> that will help when computing the set of ring homomorphisms out of a localization ring. 
    </p>
    <corollary xml:id="cor_locali_map">
        <title>Mapping property of localizations</title> 
        <statement>
            <p>
                Let <m>S</m> be a multiplicative subset of the nonzero commutative ring <m>R</m>, and let <m>\lambda\colon R\rightarrow S^{-1}R</m> be the localization map. Given any nonzero ring <m>T</m>, the map  
                <md number="yes">
                    <mrow>\Hom(S^{-1}R, T)\amp \rightarrow \{\psi\in \Hom(R,T)\mid \phi(S)\subseteq T^*\}</mrow>
                    <mrow>\phi \amp \mapsto \psi=\phi\circ \lambda</mrow>
                </md>
                is a bijection. 
            </p>
        </statement>
    </corollary>
    <p>
        As a special case, we can consider an integral domain <m>R</m> and with multiplicative set <m>S=R-\{0\}</m>. In this case, we have <m>S^{-1}R=\Frac R</m>, immediately yielding the following result. 
    </p>
    <corollary xml:id="cor_frac_field">
        <title>Fraction field mapping property</title>
        <statement>
            <p>
              Let <m>R</m> be an integral domain with fraction field <m>\Frac R</m>, and let <m>\lambda\colon R\rightarrow \Frac R</m> be the localization map. Given any field <m>K</m> and ring homomorphism <m>\phi\colon R\rightarrow K</m>, there is a unique injective ring homomorphism <m>\phi^*\colon \Frac R\rightarrow K</m> satisfying <m>\phi=\phi^*\lambda</m>. 
            </p>
        </statement>
    </corollary>
    <remark>
        <title>Fraction field mapping property</title>
        <p>
            With the set up as in <xref ref="cor_frac_field"/>, if we identify <m>R</m> with its isomorphic image <m>\lambda(R)</m> in <m>\Frac R</m>, then we obtain the following version of this result: given any ring homomorphism <m>\phi\colon R\rightarrow K</m>, where  <m>K</m> is a field, there is a unique extension <m>\phi^*\colon \Frac R\rightarrow K</m>. This property is summarized by the following diagram, obtained simply by replacing the map <m>\lambda</m> in  <xref ref="th_locali_mapping"/> with the inclusion relation. 
        </p>
        <image width="35%">
            <shortdescription>Diagram summarizing mapping property of fraction field</shortdescription>
            <latex-image>
            \begin{tikzcd}
            R\arrow[dr,phantom,sloped, "\subseteq"] \arrow[rr,"\phi"] \amp [-10] \amp [-10] K \\ 
            \amp \Frac R\arrow[ru,hookrightarrow,"\phi^*"'] \amp
            \end{tikzcd}
            </latex-image>
        </image>
        <p>
            Since the maps <m>\phi</m> and <m>\phi^*</m> are both injective, this property is often summarized by saying that <m>\Frac R</m> is the <em>smallest</em> field containing <m>R</m>. 
        </p>
    </remark>
    <convention xml:id="notation_locali_at_x">
        <title>Special types of localizations</title>
        <p>
            Let <m>R</m> be a commutative ring. Given a nonzero element <m>x\in R</m>, we define <m>R_x=S^{-1}R</m>, where 
            <md>
                <mrow>S= \amp \{x^n\mid n\in \Z_{\geq 0}\}=\{1,x,x^2,\dots\}</mrow>
            </md>.
            Loosely speaking, <m>R_x</m> is the ring obtained from <m>R</m> by adjoining an inverse of <m>x</m>. 
        </p>
        <p>
            Given a prime ideal <m>P\subseteq R</m>, we define <m>R_P=S^{-1}P</m>, where 
            <md>
                <mrow>S \amp = \{x\in R\mid x\notin P\}</mrow>
            </md>.
            Note that the primality of <m>P</m> implies <m>S</m> is multiplicative: since <m>P\ne R</m>, <m>1\notin P</m>, and hence <m>1\in S</m>; and <m>S</m> is closed under multiplication because if <m>s</m> and <m>t</m> are not elements of <m>P</m>, then neither is <m>st</m>. 
        </p>
        <p>
            The localization <m>R_P</m> is called the localization of <m>R</m> at the prime ideal <m>P</m>. It can be thought of as the ring obtained from <m>R</m> by inverting all elements outside of <m>P</m>. 
        </p>
    </convention>
    <p>
        We now proceed to some examples illustrating how to use <xref ref="th_locali_mapping"/> in order to identify localizations as familiar rings. Since we will be interested in establishing isomorphisms, we will want to know when the map <m>\phi^*</m> is <em>injective</em>. The following proposition is helpful in that regard. 
    </p>
    <proposition xml:id="prop_locali_ker_map">
        <title>Kernel of <m>\phi^*</m></title>
        <statement>
            <p>
                Let <m>S</m> be a multiplicative subset of the nonzero commutative ring <m>R</m>, let <m>\phi\colon R\rightarrow T</m> be a ring homomorphism satisfying <m>\phi(S)\subseteq T^*</m>, and let <m>\phi^*\colon S^{-1}R\rightarrow T</m> be its associated map as in <xref ref="th_locali_mapping"/>. We have 
                <md>
                    <mrow>\ker\phi^* \amp =\{r/s\in S^{-1}R\mid r\in \ker\phi\}</mrow>
                </md>.
                In particular, if <m>\phi</m> is injective, then so is <m>\phi^*</m>.  
            </p>
        </statement>
        <proof>
            <p>
                This follows directly from the definition of <m>\phi^*</m> and the fact that <m>\phi(S)\subseteq T^*</m>: we have 
                <md>
                    <mrow>\phi^*(r/s)=0 \amp \iff \phi(r)\phi(s)^{-1}=0</mrow>
                    <mrow> \amp \iff \phi(r)=0 \amp (\phi(s)\in T^*)</mrow>
                    <mrow> \amp \iff r\in \ker\phi</mrow>
                </md>,
                as desired. 
            </p>
        </proof>
    </proposition>
    <remark>
        <title>Kernel of <m>\phi^*</m></title>
        <p>
            Getting ahead of ourselves somewhat, using the notation and results of <xref ref="th_locali_ideals"/>, we can summarize <xref ref="prop_locali_ker_map"/> as follows: 
            <md>
                <mrow>\ker\phi^* \amp =S^{-1}\ker\phi</mrow>
                <mrow> \amp = (\lambda(\ker\phi))</mrow>
            </md>.
        </p>
    </remark>
    <example xml:id="eg_locali_at_2">
    <title>Localizing at an element: <m>\Z_2</m></title>
    <statement>
    <p>
    Identify <m>\Z_2</m> (up to isomorphism) as a subring of a familiar ring. To be clear, <m>\Z_2=S^{-1}\Z</m>, where <m>S=\{1,2,2^2,\dots\}</m>.
    </p>
    <p>
        Use <xref ref="th_locali_mapping"/>.
    </p>
    </statement>
    <solution>
    <p>
    Using the intuitive idea of <m>\Z_2</m> as the <q>smallest</q> ring obtained from <m>\Z</m> by adding an inverse to <m>2</m> (and hence all of its powers), and observing that <m>\Q</m> is precisely such a ring, we guess that <m>\Z_2</m> might be isomorphic to some subring of <m>\Q</m>. Let's use <xref ref="th_locali_mapping"/> to make things precise (and rigorous). We let <m>\phi\colon \Z\rightarrow \Q</m> be the inclusion map. 
    </p>
    <p> Let <m>S=\{1,2,2^2,\dots\}</m>, since <m>\phi(S)=S\subseteq \Q^*</m>, we have a ring homomorphism <m>\phi^*\colon \Z_2\rightarrow \Q</m> defined as 
        <md>
            <mrow>\phi^*(m/2^r)\amp =\phi(m)\phi(2^r)^{-1}</mrow>
            <mrow> \amp =m(2^r)^{-1}</mrow>
            <mrow> \amp =\frac{m}{2^r}</mrow>
        </md>.
    By <xref ref="prop_locali_ker_map"/>, since <m>\phi</m> is injective, so is <m>\phi^*</m>. By the first isomorphism theorem, we have 
    <md>
        <mrow>\Z_2 \amp \cong \phi^*(\Z_2)=\{q\in \Q\mid q=m/2^r \text{ for some } m\in \Z, r\geq 0\}</mrow>
    </md>.

    </p>
    </solution>
    </example>
    <example xml:id="eg_locali_int_poly">
    <title>Localization of <m>\Z[x]</m></title>
    <statement>
    <p>
    Define the subset <m>S</m> of <m>\Z[x]</m> as 
    <md>
        <mrow>S \amp =\Z-\{0\}</mrow>
    </md>,
    where as usual, we identify <m>\Z</m> with the subring of <m>\Z[x]</m> consisting of the constant polynomials. Identify <m>S^{-1}\Z[x]</m> (up to isomorphism) with a familiar ring. 
    </p>
    </statement>
    <solution>
    <p>
    Again, working intuitively, we ask ourselves what would be the result of taking the ring <m>\Z[x]</m> and inverting all nonzero integers. The resulting ring should then contain <m>\Q</m>. But a ring that contains <m>\Q</m> and <m>\Z[x]</m>, then you should probably containg <m>\Q[x]</m>, right? So we guess that <m>S^{-1}\Z[x]\cong \Q[x]</m>. Let <m>\phi\colon \Z[x]\rightarrow \Q[x]</m> be the usual inclusion map. We have <m>\phi(S)=\Z-\{0\}\subseteq \Q[x]^*</m>, since in general the units of a polynomial ring <m>F[x]</m> are precisely the nonzero constant polynomials. Since <m>\phi</m> is injective, so is the associated map <m>\phi^*\colon S^{-1}\Z[x]\rightarrow \Q[x]</m>. Thus we have 
    <md>
        <mrow>S^{-1}\Z[x] \amp \cong \phi^*(\Z[x])</mrow>
        <mrow> \amp = \{\phi^*(f/m)\mid f\in \Z[x], m\in \Z-\{0\}\}</mrow>
        <mrow> \amp = \{\phi(f)\phi(m)^{-1}\mid f\in \Z[x], m\in \Z-\{0\}\}</mrow>
        <mrow> \amp = \{f/m\mid f\in \Z[x], m\in \Z-\{0\}\}</mrow>
        <mrow> \amp = \Q[x]</mrow>
    </md>.
    For the last equality, the <m>\subseteq</m> inclusion is clear. For the reverse inclusion, given any <m>g\in \Q[x]</m>, we have 
    <md>
        <mrow>g(x) \amp = \frac{p_n}{q^n}x^n+\cdots +\frac{p_1}{q_1}x+\frac{p_0}{q_0}, \ p_i, q_i\in \Z </mrow>
        <mrow> \amp = \frac{1}{q_nq_{n-1}\cdots q_0}(\sum_{k=0}^np_k\prod_{j\ne k}q_jx^k)</mrow>
        <mrow> \amp = \frac{1}{m}f(x)</mrow>
    </md>,
    where <m>m=\prod_{k=0}^nq_i</m>, and <m>f=\sum_{k=0}^np_k\prod_{j\ne k}q_jx^k\in \Z[x]</m>.
    </p>
    </solution>
    </example>
    
    <theorem xml:id="th_locali_ideals">
    <title>Localizations and ideals</title>
    <statement>
    <p>
    Let <m>S</m> be a multiplicative subset of the nonzero commutative ring <m>R</m>, and let <m>\lambda\colon R\rightarrow S^{-1}R</m> be the localization map. 
    </p>
    <p>
        Given an ideal <m>I\subseteq R</m>, define 
        <md number="yes">
            <mrow>S^{-1}I \amp =(\lambda(I))</mrow>
        </md>,
        the ideal of <m>S^{-1}R</m> generated by the set <m>\lambda(I)</m>. 
    <ol>
        <li>
            <p> We have 
                <md number="yes">
                    <mrow xml:id="eq_locali_extension">S^{-1}I \amp = \{r/s\mid r\in I\}</mrow>
                </md>
                for all ideals <m>I\subseteq R</m>. Furthermore, we have 
                <md number="yes">
                    <mrow>S^{-1}I=S^{-1}R \amp  \text{ if and only if } I\cap S\ne \emptyset</mrow>
                </md>.
                Equivalently, <m>S^{-1}I</m> is a proper ideal of <m>S^{-1}R</m> if and only if <m>I</m> does not intersect <m>S</m> (<ie/>, <m>I\cap S=\emptyset</m>). 
            </p>
        </li>
        <li>
            <p>
                Given an ideal <m>J\subseteq S^{-1}R</m>, let <m>I=\lambda^{-1}(J)=\{r\in R\mid r/1\in J\}</m>. We have 
                <md number="yes">
                    <mrow xml:id="eq_locali_ideal_map">J \amp =S^{-1}(I)</mrow>
                </md>.
            </p>
        </li>
        <li>
            <p>
                The maps 
                <md>
                    <mrow>P \amp  \mapsto S^{-1}P </mrow>
                    <mrow>Q\amp \mapsto \lambda^{-1}(Q)</mrow>
                </md>
                define a bijective correspondence between the set of prime ideals <m>P\subseteq R</m> that do not intersect <m>S</m> (<ie/>, <m>P\cap S=\emptyset</m>), and the prime ideals of <m>S^{-1}R</m>.
            </p>
        </li>
    </ol>
    </p>
    </statement>
    <proof>
    <p>
    </p>
    </proof>
    </theorem>
    <corollary xml:id="cor_primes_polyintergers">
        <title>Prime ideals of <m>\Z[x]</m></title>
        <statement>
            <p>
                If <m>P</m> is a prime ideal of <m>\Z[x]</m>, then one of the following statements holds. 
                <ol>
                    <li>
                        <p>
                            <m>P=(0)</m>.
                        </p>
                    </li>
                    <li>
                        <p>
                            <m>P=(p)</m>, where <m>p</m> is a prime integer. 
                        </p>
                    </li>
                    <li>
                        <p>
                            <m>P=(p,f)</m>, where <m>p</m> is a prime integer, <m>f\in \Z[x]</m> is monic, and <m>\overline{f}</m>, the reduction of <m>f</m> modulo <m>p</m>, is an irreducible polynomial of <m>\F_p[x]</m>. 
                        </p>
                    </li>
                    <li>
                        <p>
                            <m>P=(f)</m>, where <m>f\in \Z[x]</m> is irreducible when considered as a polynomial in <m>\Q[x]</m>. 
                        </p>
                    </li>
                </ol>
            </p>
        </statement>
    </corollary>

</section>